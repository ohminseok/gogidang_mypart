<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
	 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	 
 <mapper namespace="com.spring.mapper.QnaMapper">
 
 <select id="getListCount" resultType="int">
 	SELECT count(*) FROM qna
 </select>
 
 <select id="getQnaList" parameterType="HashMap" resultType="QnaVO">
	<![CDATA[
	SELECT qna_num,u_id,title,content,re_date,re_ref,re_lev,re_seq 
	FROM (SELECT rownum rnum,qna_num,u_id,title,content,re_date,re_ref,re_lev,re_seq 
	FROM (SELECT q.qna_num,m.u_id as u_id,q.title,q.content,q.re_date,q.re_ref,q.re_lev,q.re_seq 
	FROM qna q,member m WHERE q.u_id=m.u_id ORDER BY q.re_ref desc, q.re_seq asc)) 
	WHERE rnum>=#{startrow} AND rnum<=#{endrow}
	 ]]>
	</select>
 
 </mapper>